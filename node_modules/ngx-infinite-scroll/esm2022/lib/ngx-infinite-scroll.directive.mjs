import { Directive, EventEmitter, Input, Output, } from '@angular/core';
import { hasWindowDefined, inputPropChanged } from './services/ngx-ins-utils';
import { createScroller, InfiniteScrollActions, } from './services/scroll-register';
import * as i0 from "@angular/core";
class InfiniteScrollDirective {
    constructor(element, zone) {
        this.element = element;
        this.zone = zone;
        this.scrolled = new EventEmitter();
        this.scrolledUp = new EventEmitter();
        this.infiniteScrollDistance = 2;
        this.infiniteScrollUpDistance = 1.5;
        this.infiniteScrollThrottle = 150;
        this.infiniteScrollDisabled = false;
        this.infiniteScrollContainer = null;
        this.scrollWindow = true;
        this.immediateCheck = false;
        this.horizontal = false;
        this.alwaysCallback = false;
        this.fromRoot = false;
    }
    ngAfterViewInit() {
        if (!this.infiniteScrollDisabled) {
            this.setup();
        }
    }
    ngOnChanges({ infiniteScrollContainer, infiniteScrollDisabled, infiniteScrollDistance, }) {
        const containerChanged = inputPropChanged(infiniteScrollContainer);
        const disabledChanged = inputPropChanged(infiniteScrollDisabled);
        const distanceChanged = inputPropChanged(infiniteScrollDistance);
        const shouldSetup = (!disabledChanged && !this.infiniteScrollDisabled) ||
            (disabledChanged && !infiniteScrollDisabled.currentValue) ||
            distanceChanged;
        if (containerChanged || disabledChanged || distanceChanged) {
            this.destroyScroller();
            if (shouldSetup) {
                this.setup();
            }
        }
    }
    setup() {
        if (hasWindowDefined()) {
            this.zone.runOutsideAngular(() => {
                this.disposeScroller = createScroller({
                    fromRoot: this.fromRoot,
                    alwaysCallback: this.alwaysCallback,
                    disable: this.infiniteScrollDisabled,
                    downDistance: this.infiniteScrollDistance,
                    element: this.element,
                    horizontal: this.horizontal,
                    scrollContainer: this.infiniteScrollContainer,
                    scrollWindow: this.scrollWindow,
                    throttle: this.infiniteScrollThrottle,
                    upDistance: this.infiniteScrollUpDistance,
                }).subscribe((payload) => this.handleOnScroll(payload));
            });
        }
    }
    handleOnScroll({ type, payload }) {
        const emitter = type === InfiniteScrollActions.DOWN ? this.scrolled : this.scrolledUp;
        if (hasObservers(emitter)) {
            this.zone.run(() => emitter.emit(payload));
        }
    }
    ngOnDestroy() {
        this.destroyScroller();
    }
    destroyScroller() {
        if (this.disposeScroller) {
            this.disposeScroller.unsubscribe();
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.1", ngImport: i0, type: InfiniteScrollDirective, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "16.0.1", type: InfiniteScrollDirective, selector: "[infiniteScroll], [infinite-scroll], [data-infinite-scroll]", inputs: { infiniteScrollDistance: "infiniteScrollDistance", infiniteScrollUpDistance: "infiniteScrollUpDistance", infiniteScrollThrottle: "infiniteScrollThrottle", infiniteScrollDisabled: "infiniteScrollDisabled", infiniteScrollContainer: "infiniteScrollContainer", scrollWindow: "scrollWindow", immediateCheck: "immediateCheck", horizontal: "horizontal", alwaysCallback: "alwaysCallback", fromRoot: "fromRoot" }, outputs: { scrolled: "scrolled", scrolledUp: "scrolledUp" }, usesOnChanges: true, ngImport: i0 }); }
}
export { InfiniteScrollDirective };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.1", ngImport: i0, type: InfiniteScrollDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[infiniteScroll], [infinite-scroll], [data-infinite-scroll]',
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { scrolled: [{
                type: Output
            }], scrolledUp: [{
                type: Output
            }], infiniteScrollDistance: [{
                type: Input
            }], infiniteScrollUpDistance: [{
                type: Input
            }], infiniteScrollThrottle: [{
                type: Input
            }], infiniteScrollDisabled: [{
                type: Input
            }], infiniteScrollContainer: [{
                type: Input
            }], scrollWindow: [{
                type: Input
            }], immediateCheck: [{
                type: Input
            }], horizontal: [{
                type: Input
            }], alwaysCallback: [{
                type: Input
            }], fromRoot: [{
                type: Input
            }] } });
function hasObservers(emitter) {
    // Note: The `observed` property is available only in RxJS@7.2.0, which means it's
    // not available for users running the lower version.
    return emitter.observed ?? emitter.observers.length > 0;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWluZmluaXRlLXNjcm9sbC5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtaW5maW5pdGUtc2Nyb2xsL3NyYy9saWIvbmd4LWluZmluaXRlLXNjcm9sbC5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLFNBQVMsRUFFVCxZQUFZLEVBQ1osS0FBSyxFQUlMLE1BQU0sR0FFUCxNQUFNLGVBQWUsQ0FBQztBQUl2QixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUM5RSxPQUFPLEVBQ0wsY0FBYyxFQUNkLHFCQUFxQixHQUN0QixNQUFNLDRCQUE0QixDQUFDOztBQUVwQyxNQUdhLHVCQUF1QjtJQW1CbEMsWUFBb0IsT0FBbUIsRUFBVSxJQUFZO1FBQXpDLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFBVSxTQUFJLEdBQUosSUFBSSxDQUFRO1FBaEJuRCxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQXdCLENBQUM7UUFDcEQsZUFBVSxHQUFHLElBQUksWUFBWSxFQUF3QixDQUFDO1FBRXZELDJCQUFzQixHQUFXLENBQUMsQ0FBQztRQUNuQyw2QkFBd0IsR0FBVyxHQUFHLENBQUM7UUFDdkMsMkJBQXNCLEdBQVcsR0FBRyxDQUFDO1FBQ3JDLDJCQUFzQixHQUFZLEtBQUssQ0FBQztRQUN4Qyw0QkFBdUIsR0FBUSxJQUFJLENBQUM7UUFDcEMsaUJBQVksR0FBWSxJQUFJLENBQUM7UUFDN0IsbUJBQWMsR0FBWSxLQUFLLENBQUM7UUFDaEMsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUM1QixtQkFBYyxHQUFZLEtBQUssQ0FBQztRQUNoQyxhQUFRLEdBQVksS0FBSyxDQUFDO0lBSTZCLENBQUM7SUFFakUsZUFBZTtRQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUU7WUFDaEMsSUFBSSxDQUFDLEtBQUss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c0JBQS9CLEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxjQUFjO3NCQUF0QixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLOztBQXdFUixTQUFTLFlBQVksQ0FBSSxPQUF3QjtJQUMvQyxrRkFBa0Y7SUFDbEYscURBQXFEO0lBQ3JELE9BQU8sT0FBTyxDQUFDLFFBQVEsSUFBSSxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDMUQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIERpcmVjdGl2ZSxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgTmdab25lLFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgT3V0cHV0LFxuICBTaW1wbGVDaGFuZ2VzLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBJSW5maW5pdGVTY3JvbGxFdmVudCwgSUluZmluaXRlU2Nyb2xsQWN0aW9uIH0gZnJvbSAnLi4vbW9kZWxzJztcbmltcG9ydCB7IGhhc1dpbmRvd0RlZmluZWQsIGlucHV0UHJvcENoYW5nZWQgfSBmcm9tICcuL3NlcnZpY2VzL25neC1pbnMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlU2Nyb2xsZXIsXG4gIEluZmluaXRlU2Nyb2xsQWN0aW9ucyxcbn0gZnJvbSAnLi9zZXJ2aWNlcy9zY3JvbGwtcmVnaXN0ZXInO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbaW5maW5pdGVTY3JvbGxdLCBbaW5maW5pdGUtc2Nyb2xsXSwgW2RhdGEtaW5maW5pdGUtc2Nyb2xsXScsXG59KVxuZXhwb3J0IGNsYXNzIEluZmluaXRlU2Nyb2xsRGlyZWN0aXZlXG4gIGltcGxlbWVudHMgT25EZXN0cm95LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXRcbntcbiAgQE91dHB1dCgpIHNjcm9sbGVkID0gbmV3IEV2ZW50RW1pdHRlcjxJSW5maW5pdGVTY3JvbGxFdmVudD4oKTtcbiAgQE91dHB1dCgpIHNjcm9sbGVkVXAgPSBuZXcgRXZlbnRFbWl0dGVyPElJbmZpbml0ZVNjcm9sbEV2ZW50PigpO1xuXG4gIEBJbnB1dCgpIGluZmluaXRlU2Nyb2xsRGlzdGFuY2U6IG51bWJlciA9IDI7XG4gIEBJbnB1dCgpIGluZmluaXRlU2Nyb2xsVXBEaXN0YW5jZTogbnVtYmVyID0gMS41O1xuICBASW5wdXQoKSBpbmZpbml0ZVNjcm9sbFRocm90dGxlOiBudW1iZXIgPSAxNTA7XG4gIEBJbnB1dCgpIGluZmluaXRlU2Nyb2xsRGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgaW5maW5pdGVTY3JvbGxDb250YWluZXI6IGFueSA9IG51bGw7XG4gIEBJbnB1dCgpIHNjcm9sbFdpbmRvdzogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIGltbWVkaWF0ZUNoZWNrOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIGhvcml6b250YWw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgYWx3YXlzQ2FsbGJhY2s6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgZnJvbVJvb3Q6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIGRpc3Bvc2VTY3JvbGxlcj86IFN1YnNjcmlwdGlvbjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsIHByaXZhdGUgem9uZTogTmdab25lKSB7fVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuaW5maW5pdGVTY3JvbGxEaXNhYmxlZCkge1xuICAgICAgdGhpcy5zZXR1cCgpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKHtcbiAgICBpbmZpbml0ZVNjcm9sbENvbnRhaW5lcixcbiAgICBpbmZpbml0ZVNjcm9sbERpc2FibGVkLFxuICAgIGluZmluaXRlU2Nyb2xsRGlzdGFuY2UsXG4gIH06IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBjb25zdCBjb250YWluZXJDaGFuZ2VkID0gaW5wdXRQcm9wQ2hhbmdlZChpbmZpbml0ZVNjcm9sbENvbnRhaW5lcik7XG4gICAgY29uc3QgZGlzYWJsZWRDaGFuZ2VkID0gaW5wdXRQcm9wQ2hhbmdlZChpbmZpbml0ZVNjcm9sbERpc2FibGVkKTtcbiAgICBjb25zdCBkaXN0YW5jZUNoYW5nZWQgPSBpbnB1dFByb3BDaGFuZ2VkKGluZmluaXRlU2Nyb2xsRGlzdGFuY2UpO1xuICAgIGNvbnN0IHNob3VsZFNldHVwID1cbiAgICAgICghZGlzYWJsZWRDaGFuZ2VkICYmICF0aGlzLmluZmluaXRlU2Nyb2xsRGlzYWJsZWQpIHx8XG4gICAgICAoZGlzYWJsZWRDaGFuZ2VkICYmICFpbmZpbml0ZVNjcm9sbERpc2FibGVkLmN1cnJlbnRWYWx1ZSkgfHxcbiAgICAgIGRpc3RhbmNlQ2hhbmdlZDtcblxuICAgIGlmIChjb250YWluZXJDaGFuZ2VkIHx8IGRpc2FibGVkQ2hhbmdlZCB8fCBkaXN0YW5jZUNoYW5nZWQpIHtcbiAgICAgIHRoaXMuZGVzdHJveVNjcm9sbGVyKCk7XG4gICAgICBpZiAoc2hvdWxkU2V0dXApIHtcbiAgICAgICAgdGhpcy5zZXR1cCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldHVwKCkge1xuICAgIGlmIChoYXNXaW5kb3dEZWZpbmVkKCkpIHtcbiAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcG9zZVNjcm9sbGVyID0gY3JlYXRlU2Nyb2xsZXIoe1xuICAgICAgICAgIGZyb21Sb290OiB0aGlzLmZyb21Sb290LFxuICAgICAgICAgIGFsd2F5c0NhbGxiYWNrOiB0aGlzLmFsd2F5c0NhbGxiYWNrLFxuICAgICAgICAgIGRpc2FibGU6IHRoaXMuaW5maW5pdGVTY3JvbGxEaXNhYmxlZCxcbiAgICAgICAgICBkb3duRGlzdGFuY2U6IHRoaXMuaW5maW5pdGVTY3JvbGxEaXN0YW5jZSxcbiAgICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgaG9yaXpvbnRhbDogdGhpcy5ob3Jpem9udGFsLFxuICAgICAgICAgIHNjcm9sbENvbnRhaW5lcjogdGhpcy5pbmZpbml0ZVNjcm9sbENvbnRhaW5lcixcbiAgICAgICAgICBzY3JvbGxXaW5kb3c6IHRoaXMuc2Nyb2xsV2luZG93LFxuICAgICAgICAgIHRocm90dGxlOiB0aGlzLmluZmluaXRlU2Nyb2xsVGhyb3R0bGUsXG4gICAgICAgICAgdXBEaXN0YW5jZTogdGhpcy5pbmZpbml0ZVNjcm9sbFVwRGlzdGFuY2UsXG4gICAgICAgIH0pLnN1YnNjcmliZSgocGF5bG9hZCkgPT4gdGhpcy5oYW5kbGVPblNjcm9sbChwYXlsb2FkKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVPblNjcm9sbCh7IHR5cGUsIHBheWxvYWQgfTogSUluZmluaXRlU2Nyb2xsQWN0aW9uKSB7XG4gICAgY29uc3QgZW1pdHRlciA9XG4gICAgICB0eXBlID09PSBJbmZpbml0ZVNjcm9sbEFjdGlvbnMuRE9XTiA/IHRoaXMuc2Nyb2xsZWQgOiB0aGlzLnNjcm9sbGVkVXA7XG5cbiAgICBpZiAoaGFzT2JzZXJ2ZXJzKGVtaXR0ZXIpKSB7XG4gICAgICB0aGlzLnpvbmUucnVuKCgpID0+IGVtaXR0ZXIuZW1pdChwYXlsb2FkKSk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95U2Nyb2xsZXIoKTtcbiAgfVxuXG4gIGRlc3Ryb3lTY3JvbGxlcigpIHtcbiAgICBpZiAodGhpcy5kaXNwb3NlU2Nyb2xsZXIpIHtcbiAgICAgIHRoaXMuZGlzcG9zZVNjcm9sbGVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGhhc09ic2VydmVyczxUPihlbWl0dGVyOiBFdmVudEVtaXR0ZXI8VD4pOiBib29sZWFuIHtcbiAgLy8gTm90ZTogVGhlIGBvYnNlcnZlZGAgcHJvcGVydHkgaXMgYXZhaWxhYmxlIG9ubHkgaW4gUnhKU0A3LjIuMCwgd2hpY2ggbWVhbnMgaXQnc1xuICAvLyBub3QgYXZhaWxhYmxlIGZvciB1c2VycyBydW5uaW5nIHRoZSBsb3dlciB2ZXJzaW9uLlxuICByZXR1cm4gZW1pdHRlci5vYnNlcnZlZCA/PyBlbWl0dGVyLm9ic2VydmVycy5sZW5ndGggPiAwO1xufVxuIl19